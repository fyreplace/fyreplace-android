---
openapi: 3.0.3
info:
  title: Fyreplace API
  version: v0.7.0
paths:
  /emails:
    get:
      tags:
        - Emails Endpoint
      operationId: listEmails
      parameters:
        - name: page
          in: query
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Email"
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
    post:
      tags:
        - Emails Endpoint
      operationId: createEmail
      parameters:
        - name: customDeepLinks
          in: query
          schema:
            type: boolean
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EmailCreation"
        required: true
      responses:
        default:
          description: Unexpected error
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Email"
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /emails/activate:
    post:
      tags:
        - Emails Endpoint
      operationId: activateEmail
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EmailActivation"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /emails/count:
    get:
      tags:
        - Emails Endpoint
      operationId: countEmails
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                format: int64
                type: integer
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /emails/{id}:
    delete:
      tags:
        - Emails Endpoint
      operationId: deleteEmail
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /emails/{id}/main:
    put:
      tags:
        - Emails Endpoint
      operationId: setMainEmail
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /posts:
    get:
      tags:
        - Posts Endpoint
      operationId: listPosts
      parameters:
        - name: ascending
          in: query
          schema:
            type: boolean
        - name: page
          in: query
          schema:
            format: int32
            minimum: 0
            type: integer
        - name: type
          in: query
          required: true
          schema:
            $ref: "#/components/schemas/PostListingType"
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Post"
        "400":
          description: Bad Request
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
    post:
      tags:
        - Posts Endpoint
      operationId: createPost
      responses:
        default:
          description: Unexpected error
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Post"
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/count:
    get:
      tags:
        - Posts Endpoint
      operationId: countPosts
      parameters:
        - name: type
          in: query
          required: true
          schema:
            $ref: "#/components/schemas/PostListingType"
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                format: int64
                type: integer
        "400":
          description: Bad Request
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/feed:
    get:
      tags:
        - Posts Endpoint
      operationId: listPostsFeed
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Post"
  /posts/{id}:
    get:
      tags:
        - Posts Endpoint
      operationId: getPost
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Post"
        "404":
          description: Not Found
    delete:
      tags:
        - Posts Endpoint
      operationId: deletePost
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/chapters:
    post:
      tags:
        - Chapters Endpoint
      operationId: createChapter
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Chapter"
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /posts/{id}/chapters/{position}:
    delete:
      tags:
        - Chapters Endpoint
      operationId: deleteChapter
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: position
          in: path
          required: true
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/chapters/{position}/image:
    put:
      tags:
        - Chapters Endpoint
      operationId: setChapterImage
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: position
          in: path
          required: true
          schema:
            format: int32
            minimum: 0
            type: integer
      requestBody:
        content:
          application/octet-stream:
            schema:
              format: binary
              type: string
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                type: string
        "404":
          description: Not Found
        "413":
          description: Payload Too Large
        "415":
          description: Unsupported Media Type
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/chapters/{position}/position:
    put:
      tags:
        - Chapters Endpoint
      operationId: setChapterPosition
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: position
          in: path
          required: true
          schema:
            format: int32
            minimum: 0
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChapterPositionUpdate"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/chapters/{position}/text:
    put:
      tags:
        - Chapters Endpoint
      operationId: setChapterText
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: position
          in: path
          required: true
          schema:
            format: int32
            minimum: 0
            type: integer
      requestBody:
        content:
          text/plain:
            schema:
              maxLength: 500
              type: string
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/comments:
    get:
      tags:
        - Comments Endpoint
      operationId: listComments
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: page
          in: query
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Comment"
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
    post:
      tags:
        - Comments Endpoint
      operationId: createComment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CommentCreation"
        required: true
      responses:
        default:
          description: Unexpected error
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Comment"
        "400":
          description: Bad Request
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /posts/{id}/comments/count:
    get:
      tags:
        - Comments Endpoint
      operationId: countComments
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: read
          in: query
          schema:
            type: boolean
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                format: int64
                type: integer
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/comments/{position}:
    delete:
      tags:
        - Comments Endpoint
      operationId: deleteComment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: position
          in: path
          required: true
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "400":
          description: Bad Request
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /posts/{id}/comments/{position}/acknowledge:
    post:
      tags:
        - Comments Endpoint
      operationId: acknowledgeComment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: position
          in: path
          required: true
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/comments/{position}/reported:
    put:
      tags:
        - Comments Endpoint
      operationId: setCommentReported
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
        - name: position
          in: path
          required: true
          schema:
            format: int32
            minimum: 0
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReportUpdate"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /posts/{id}/publish:
    post:
      tags:
        - Posts Endpoint
      operationId: publishPost
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PostPublication"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /posts/{id}/reported:
    put:
      tags:
        - Posts Endpoint
      operationId: setPostReported
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReportUpdate"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/subscribed:
    put:
      tags:
        - Posts Endpoint
      operationId: setPostSubscribed
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubscriptionUpdate"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /posts/{id}/vote:
    post:
      tags:
        - Posts Endpoint
      operationId: votePost
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VoteCreation"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /reports:
    get:
      tags:
        - Reports Endpoint
      operationId: listReports
      parameters:
        - name: page
          in: query
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Report"
        "400":
          description: Bad Request
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /subscriptions/unread:
    get:
      tags:
        - Subscriptions Endpoint
      operationId: listUnreadSubscriptions
      parameters:
        - name: page
          in: query
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Subscription"
        "400":
          description: Bad Request
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
    delete:
      tags:
        - Subscriptions Endpoint
      operationId: clearUnreadSubscriptions
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /subscriptions/{id}:
    delete:
      tags:
        - Subscriptions Endpoint
      operationId: deleteSubscription
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /tokens:
    post:
      tags:
        - Tokens Endpoint
      operationId: createToken
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TokenCreation"
        required: true
      responses:
        default:
          description: Unexpected error
        "201":
          description: Created
          content:
            text/plain:
              schema:
                format: password
                type: string
        "400":
          description: Bad Request
        "404":
          description: Not Found
  /tokens/new:
    get:
      tags:
        - Tokens Endpoint
      operationId: getNewToken
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                format: password
                type: string
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
    post:
      tags:
        - Tokens Endpoint
      operationId: createNewToken
      parameters:
        - name: customDeepLinks
          in: query
          schema:
            type: boolean
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NewTokenCreation"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
  /users:
    post:
      tags:
        - Users Endpoint
      operationId: createUser
      parameters:
        - name: customDeepLinks
          in: query
          schema:
            type: boolean
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserCreation"
        required: true
      responses:
        default:
          description: Unexpected error
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ViolationReport"
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
  /users/blocked:
    get:
      tags:
        - Users Endpoint
      operationId: listBlockedUsers
      parameters:
        - name: page
          in: query
          schema:
            format: int32
            minimum: 0
            type: integer
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Profile"
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /users/blocked/count:
    get:
      tags:
        - Users Endpoint
      operationId: countBlockedUsers
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                format: int64
                type: integer
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /users/current:
    get:
      tags:
        - Users Endpoint
      operationId: getCurrentUser
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
    delete:
      tags:
        - Users Endpoint
      operationId: deleteCurrentUser
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /users/current/avatar:
    put:
      tags:
        - Users Endpoint
      operationId: setCurrentUserAvatar
      requestBody:
        content:
          application/octet-stream:
            schema:
              format: binary
              type: string
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                type: string
        "413":
          description: Payload Too Large
        "415":
          description: Unsupported Media Type
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
    delete:
      tags:
        - Users Endpoint
      operationId: deleteCurrentUserAvatar
      responses:
        default:
          description: Unexpected error
        "204":
          description: No Content
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /users/current/bio:
    put:
      tags:
        - Users Endpoint
      operationId: setCurrentUserBio
      requestBody:
        content:
          text/plain:
            schema:
              type: string
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            text/plain:
              schema:
                type: string
        "400":
          description: Bad Request
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /users/{id}:
    get:
      tags:
        - Users Endpoint
      operationId: getUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "404":
          description: Not Found
  /users/{id}/banned:
    put:
      tags:
        - Users Endpoint
      operationId: setUserBanned
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "404":
          description: Not Found
        "401":
          description: Not Authorized
        "403":
          description: Not Allowed
      security:
        - SecurityScheme: [ ]
  /users/{id}/blocked:
    put:
      tags:
        - Users Endpoint
      operationId: setUserBlocked
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BlockUpdate"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "400":
          description: Bad Request
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
  /users/{id}/reported:
    put:
      tags:
        - Users Endpoint
      operationId: setUserReported
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/UUID"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReportUpdate"
        required: true
      responses:
        default:
          description: Unexpected error
        "200":
          description: OK
        "403":
          description: Not Allowed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExplainedFailure"
        "404":
          description: Not Found
        "401":
          description: Not Authorized
      security:
        - SecurityScheme: [ ]
components:
  schemas:
    BlockUpdate:
      required:
        - blocked
      type: object
      properties:
        blocked:
          type: boolean
    Chapter:
      required:
        - id
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        text:
          maxLength: 500
          type: string
        image:
          type: string
        width:
          format: int32
          minimum: 0
          type: integer
        height:
          format: int32
          minimum: 0
          type: integer
    ChapterPositionUpdate:
      type: object
      properties:
        position:
          format: int32
          minimum: 0
          type: integer
    Color:
      required:
        - r
        - g
        - b
      type: object
      properties:
        r:
          format: uint8
          maximum: 255
          minimum: 0
          type: integer
        g:
          format: uint8
          maximum: 255
          minimum: 0
          type: integer
        b:
          format: uint8
          maximum: 255
          minimum: 0
          type: integer
    Comment:
      required:
        - id
        - dateCreated
        - anonymous
        - text
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        dateCreated:
          $ref: "#/components/schemas/Instant"
        anonymous:
          type: boolean
        author:
          $ref: "#/components/schemas/Profile"
        text:
          maxLength: 1500
          type: string
    CommentCreation:
      required:
        - text
      type: object
      properties:
        text:
          maxLength: 1500
          minLength: 1
          pattern: \S
          type: string
        anonymous:
          type: boolean
    Email:
      required:
        - id
        - email
        - verified
        - main
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        email:
          maxLength: 254
          minLength: 3
          type: string
        verified:
          type: boolean
        main:
          type: boolean
    EmailActivation:
      required:
        - email
        - code
      type: object
      properties:
        email:
          maxLength: 254
          minLength: 3
          pattern: \S
          type: string
        code:
          pattern: \S
          type: string
    EmailCreation:
      required:
        - email
      type: object
      properties:
        email:
          maxLength: 254
          minLength: 3
          pattern: \S
          type: string
    ExplainedFailure:
      type: object
      properties:
        title:
          type: string
        status:
          format: int32
          type: integer
        reason:
          type: string
    Instant:
      format: date-time
      type: string
      example: 2022-03-10T16:15:50Z
    NewTokenCreation:
      required:
        - identifier
      type: object
      properties:
        identifier:
          maxLength: 254
          pattern: \S
          type: string
    Post:
      required:
        - id
        - dateCreated
        - anonymous
        - published
        - commentCount
        - voteCount
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        dateCreated:
          $ref: "#/components/schemas/Instant"
        anonymous:
          type: boolean
        author:
          $ref: "#/components/schemas/Profile"
        published:
          type: boolean
        commentCount:
          format: int64
          minimum: 0
          type: integer
        voteCount:
          format: int64
          minimum: 0
          type: integer
        chapters:
          type: array
          items:
            $ref: "#/components/schemas/Chapter"
    PostListingType:
      enum:
        - SUBSCRIBED_TO
        - PUBLISHED
        - DRAFTS
      type: string
    PostPublication:
      required:
        - anonymous
      type: object
      properties:
        anonymous:
          type: boolean
    Profile:
      required:
        - id
        - username
        - avatar
        - tint
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        username:
          type: string
        avatar:
          type: string
        tint:
          $ref: "#/components/schemas/Color"
    Rank:
      enum:
        - CITIZEN
        - MODERATOR
        - ADMINISTRATOR
      type: string
    Report:
      required:
        - id
        - dateCreated
        - targetId
        - source
        - targetModel
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        dateCreated:
          $ref: "#/components/schemas/Instant"
        targetId:
          $ref: "#/components/schemas/UUID"
        source:
          $ref: "#/components/schemas/Profile"
        targetModel:
          type: string
    ReportUpdate:
      required:
        - reported
      type: object
      properties:
        reported:
          type: boolean
    Subscription:
      required:
        - id
        - post
        - unreadCommentCount
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        post:
          $ref: "#/components/schemas/Post"
        unreadCommentCount:
          format: int64
          minimum: 0
          type: integer
    SubscriptionUpdate:
      required:
        - subscribed
      type: object
      properties:
        subscribed:
          type: boolean
    TokenCreation:
      required:
        - identifier
        - secret
      type: object
      properties:
        identifier:
          maxLength: 254
          pattern: \S
          type: string
        secret:
          format: password
          pattern: \S
          type: string
    UUID:
      format: uuid
      pattern: "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}"
      type: string
    User:
      required:
        - id
        - dateCreated
        - username
        - rank
        - avatar
        - bio
        - banned
        - blocked
        - tint
      type: object
      properties:
        id:
          $ref: "#/components/schemas/UUID"
        dateCreated:
          $ref: "#/components/schemas/Instant"
        username:
          maxLength: 50
          minLength: 3
          pattern: "^[\\w.@+-]+$"
          type: string
        rank:
          $ref: "#/components/schemas/Rank"
        avatar:
          type: string
        bio:
          type: string
        banned:
          type: boolean
        blocked:
          type: boolean
        tint:
          $ref: "#/components/schemas/Color"
    UserCreation:
      required:
        - email
        - username
      type: object
      properties:
        email:
          maxLength: 254
          minLength: 3
          pattern: \S
          type: string
        username:
          maxLength: 50
          minLength: 3
          pattern: "^[\\w.@+-]+$"
          type: string
    Violation:
      type: object
      properties:
        field:
          type: string
        message:
          type: string
    ViolationReport:
      type: object
      properties:
        title:
          type: string
        status:
          format: int32
          type: integer
        violations:
          type: array
          items:
            $ref: "#/components/schemas/Violation"
    VoteCreation:
      required:
        - spread
      type: object
      properties:
        spread:
          type: boolean
  securitySchemes:
    SecurityScheme:
      type: http
      description: Authentication
      scheme: bearer
      bearerFormat: JWT
